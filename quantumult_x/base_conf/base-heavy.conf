# base heavy conf
# 本配置，以尽可能大而全为主，但为自用

# general 模块内为一些通用的设置参数项
[general]

# Quantumult X 会对 server_check_url 指定的网址进行相应测试，以确认节点的可用性
# 你同样可以在 server_local/remote 中，为节点、订阅单独指定 server_check_url 参数
server_check_url = http://www.qualcomm.cn/generate_204
# 节点延迟测试超时参数，需小于 5000 毫秒才生效
server_check_timeout = 2000

# 资源解析器，可用于自定义各类远程资源的转换，如节点，规则 filter，复写 rewrite 等，url 地址可远程，可本地/iCloud(Quantumult X/Scripts目录);
# 具体内容直接参照链接里的使用说明
resource_parser_url = https://fastly.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js

# geo_location_checker 用于节点页面的节点信息展示，可完整自定义展示内容与方式
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js

# 运行模式模块，running_mode_trigger 设置，即根据网络自动切换 分流/直连/全局代理 等模式。
# running-mode-trigger 模式下，跟手动切换直连/全局代理 等效，rewrite/task 模块始终会生效，比 ssid 策略组设置简单，比 ssid-suspend 更灵活。
running_mode_trigger = filter, filter, HedyLamarr:all_direct
# 上述写法，前两个 filter 先后表示 在 [数据蜂窝网络] 跟 [一般 Wi-Fi] 下，走 filter(分流) 模式，后面则表示在 asus-5g 下切换为全局直连 [all_direct]，asus 切换为全局代理 [all_proxy]
# 如需使用，相应 SSID 换成你自己 Wi-Fi 名即可


[dns]
# 禁用系统 DNS（no-system）以及 ipv6
no-system
no-ipv6
# 支持参数 excluded_ssids , included_ssids(1.0.29+) 指定在特定 Wi-Fi下失效/生效

# 腾讯 DoH，阿里 DoH
doh-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query, excluded_ssids = HedyLamarr

[policy]
# 以下为策略组 [policy] 部分
# static 策略组中，你需要手动选择想要的节点/策略组
# available 策略组将按顺序选择你列表中第一个可用的节点
# round-robin 策略组，将按列表的顺序轮流使用其中的节点
# url-latency-benchmark 延迟策略组，选取延迟最优节点
# dest-hash 策略组，随机负载均衡，但相同域名走固定节点
# ssid 策略组，将根据你所设定的网络来自动切换节点/策略组
## img-url 参数用于指定策略组图标，可远程，也可本地/iCloud(Quantumult X/Images路径下) （108*108 大小）
## direct/proxy/reject 则只能用本地图标，名字分别为 direct.png, proxy.png,reject.png 放置于 Images 文件夹下即可生效 (108*108 大小)

static = Server Strategy, Auto Select, Country, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Server.png?raw=true

url-latency-benchmark = Auto Select, server-tag-regex = ^(?!.*游戏), check-interval = 600, tolerance = 0, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Auto.png?raw=true

static = Country, Hong Kong, Tai Wan, Japan, America, Other, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/World_Map.png?raw=true

static = Global Proxy, Server Strategy, Direct, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Global.png?raw=true
static = Global Direct, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/China_Map.png?raw=true
static = Final, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Final.png?raw=true
static = Apple, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Apple.png?raw=true
static = Microsoft, Direct, Server Strategy, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Microsoft.png?raw=true
static = AD Block, reject, img-url = https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/AdBlock.png

# 具体的国家分组
static = Hong Kong, server-tag-regex = 港|香港|🇭🇰|HK|hk, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Hong_Kong.png?raw=true
static = Tai Wan, server-tag-regex = 台|台灣|🇹🇼|TW|tw, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Taiwan.png?raw=true
static = Japan, server-tag-regex = 日|日本|🇯🇵|JP|jp, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/Japan.png?raw=true
static = America, server-tag-regex = 美|美国|🇺🇸|US|us, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/United_States.png?raw=true
static = Other, server-tag-regex = ^(?!.*(美|美国|🇺🇸|US|us|港|香港|🇭🇰|HK|hk|日|日本|东京|🇯🇵|JP|jp|台|台湾|TW|tw|新|新加坡|狮城|🇸🇬|SG|sg)).*, img-url = https://github.com/Koolson/Qure/blob/master/IconSet/Color/World_Map.png?raw=true


[filter_remote]
# 规则分流远程订阅
# 远程分流模块，可使用 force-policy 来强制使用策略偏好，替换远程规则内所指定的策略组
# 同样的
# update-interval 为更新时间参数，单位 秒，默认更新时间为 24*60*60 = 86400 秒，也就是 24 小时
# opt-parser = true/false 用于控制是否对本订阅 开启资源解析器，不写或者 false 表示不启用解析器

# 全球代理总规则，不包含：无法访问的域名，排除广告、苹果、微软和谷歌的规则
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/ProxyLite/ProxyLite.list?raw=true, tag = Global Proxy, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true
# 追加 Google 和 YouTube 的规则
https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/QuantumultX/Google/Google.list?raw=true， tag = Google, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/YouTube/YouTube.list?raw=true, tag = YouTube, force-policy = Global Proxy, update-interval = 172800, opt-parser = false, enabled = true

# Apple 规则
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Apple/Apple.list?raw=true, tag = Apple, force-policy = Apple, update-interval = 172800, opt-parser = false, enabled = true
# Microsoft 规则
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Microsoft/Microsoft.list?raw=true, tag = Microsoft, force-policy = Microsoft, update-interval = 172800, opt-parser = false, enabled = true

# 直连总规则，直连，指不应该被去广告分流规则屏蔽的域名、IP 等，请将此分流规则置于去广告规则之前
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/Direct/Direct.list?raw=true, tag = Global Direct, force-policy = Global Direct, update-interval = 172800, opt-parser = false, enabled = true

# 去广告总规则，去广告，指应该被分流规则屏蔽的域名、IP 等，请将此分流规则置于直连规则之后
https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/AdvertisingLite/AdvertisingLite.list?raw=true, tag = AdvertisingLite, force-policy = AD Block, update-interval = 172800, opt-parser = false, enabled = true

[filter_local]
# 本地分流规则 (对于完全相同的某条规则，本地的将优先生效)

# user-agent, ?abc*, proxy
# host, www.google.com, proxy
# host-keyword, adsite, reject
# host-suffix, googleapis.com, proxy

ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
# 若是远程分流规则里使用了国内 ip 列表，那么就没必要使用 geoip 分流规则
geoip, cn, direct
final, Final


[rewrite_remote]
# 远程重写订阅
# 包含主机名 hostname 以及复写 rewrite 规则
# update-interval 为更新时间参数，单位：秒，默认更新时间为：24 * 60 * 60 = 172800 秒，也就是 24 小时
# opt-parser = true/false 用于控制是否对订阅开启资源解析器，不写或者 false 表示不启用解析器

# default rewrite
https://github.com/DivineEngine/Profiles/blob/master/Quantumult/Rewrite/General.conf?raw=true, tag = 神机重定向, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/NobyDa/Script/blob/master/QuantumultX/TestFlightDownload.conf?raw=true, tag = TestFlight 解除限制, update-interval = 172800, opt-parser = false, enabled = true
# 去广告
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/tianfutong.conf?raw=true, tag = AD-天府通, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/mijia.conf?raw=true, tag = AD-米家, update-interval = 172800, opt-parser = false, enabled = true
https://github.com/blackmatrix7/ios_rule_script/blob/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf?raw=true, tag = 去广告-严格版, update-interval = 172800, opt-parser = false, enabled = true
# 特定 App 的特定重写
https://github.com/blackmatrix7/ios_rule_script/blob/master/script/zhihu/zhihu_plus.qxrewrite?raw=true, tag = 知乎系列, update-interval = 172800, opt-parser = false, enabled= true
https://github.com/QuentinHsu/Apple-Rules-Script/blob/main/quantumult_x/rewrite/jd.conf?raw=true, tag=京东系列, update-interval=172800, opt-parser=false, enabled=true
# 工具
https://github.com/chavyleung/scripts/blob/master/box/rewrite/boxjs.rewrite.quanx.conf?raw=true, tag = BoxJS, update-interval = 172800, opt-parser = false, enabled = true